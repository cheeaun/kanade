(function(){function a(a,h){var i=this,j=document,m;i.wrapper=typeof a=="object"?a:j.getElementById(a),i.wrapper.style.overflow="hidden",i.scroller=i.wrapper.children[0],i.scroller.style.cssText+="-webkit-transition-property:-webkit-transform;-webkit-transform-origin:0 0;-webkit-transform:"+k+"0,0"+l,i.scroller.style.cssText+="-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;",i.options={hScroll:!0,vScroll:!0,bounce:b,bounceLock:!1,momentum:b,lockDirection:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:e,fadeScrollbar:d&&b||!c,hideScrollbar:d||!c,scrollbarClass:"",onScrollStart:null,onScrollEnd:null};for(m in h)i.options[m]=h[m];i.options.hScrollbar=i.options.hScroll&&i.options.hScrollbar,i.options.vScrollbar=i.options.vScroll&&i.options.vScrollbar,i.refresh(),i._bind(f,window),i._bind(g)}a.prototype={x:0,y:0,handleEvent:function(a){var b=this;switch(a.type){case g:b._start(a);break;case h:b._move(a);break;case i:case j:b._end(a);break;case"webkitTransitionEnd":b._transitionEnd(a);break;case f:b._resize()}},_scrollbar:function(a){var b=this,c=document,d;b[a+"Scrollbar"]?(b[a+"ScrollbarWrapper"]||(d=c.createElement("div"),b.options.scrollbarClass?d.className=b.options.scrollbarClass+a.toUpperCase():d.style.cssText="position:absolute;z-index:100;"+(a=="h"?"height:7px;bottom:1px;left:2px;right:7px":"width:7px;bottom:7px;top:2px;right:1px"),d.style.cssText+="pointer-events:none;-webkit-transition-property:opacity;-webkit-transition-duration:"+(b.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(b.options.hideScrollbar?"0":"1"),b.wrapper.appendChild(d),b[a+"ScrollbarWrapper"]=d,d=c.createElement("div"),b.options.scrollbarClass||(d.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-webkit-background-clip:padding-box;-webkit-box-sizing:border-box;"+(a=="h"?"height:100%;-webkit-border-radius:4px 3px;":"width:100%;-webkit-border-radius:3px 4px;")),d.style.cssText+="pointer-events:none;-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;-webkit-transform:"+k+"0,0"+l,b[a+"ScrollbarWrapper"].appendChild(d),b[a+"ScrollbarIndicator"]=d),a=="h"?(b.hScrollbarSize=b.hScrollbarWrapper.clientWidth,b.hScrollbarIndicatorSize=m.max(m.round(b.hScrollbarSize*b.hScrollbarSize/b.scrollerW),8),b.hScrollbarIndicator.style.width=b.hScrollbarIndicatorSize+"px",b.hScrollbarMaxScroll=b.hScrollbarSize-b.hScrollbarIndicatorSize,b.hScrollbarProp=b.hScrollbarMaxScroll/b.maxScrollX):(b.vScrollbarSize=b.vScrollbarWrapper.clientHeight,b.vScrollbarIndicatorSize=m.max(m.round(b.vScrollbarSize*b.vScrollbarSize/b.scrollerH),8),b.vScrollbarIndicator.style.height=b.vScrollbarIndicatorSize+"px",b.vScrollbarMaxScroll=b.vScrollbarSize-b.vScrollbarIndicatorSize,b.vScrollbarProp=b.vScrollbarMaxScroll/b.maxScrollY),b._indicatorPos(a,!0)):b[a+"ScrollbarWrapper"]&&(b[a+"ScrollbarIndicator"].style.webkitTransform="",b[a+"ScrollbarWrapper"].parentNode.removeChild(b[a+"ScrollbarWrapper"]),b[a+"ScrollbarWrapper"]=null,b[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},0)},_pos:function(a,b){var c=this;c.x=c.hScroll?a:0,c.y=c.vScroll?b:0,c.scroller.style.webkitTransform=k+c.x+"px,"+c.y+"px"+l,c._indicatorPos("h"),c._indicatorPos("v")},_indicatorPos:function(a,b){var c=this,d=a=="h"?c.x:c.y;!c[a+"Scrollbar"]||(d=c[a+"ScrollbarProp"]*d,d<0?(d=c.options.fixedScrollbar?0:d+d*3,c[a+"ScrollbarIndicatorSize"]+d<9&&(d=-c[a+"ScrollbarIndicatorSize"]+8)):d>c[a+"ScrollbarMaxScroll"]&&(d=c.options.fixedScrollbar?c[a+"ScrollbarMaxScroll"]:d+(d-c[a+"ScrollbarMaxScroll"])*3,c[a+"ScrollbarIndicatorSize"]+c[a+"ScrollbarMaxScroll"]-d<9&&(d=c[a+"ScrollbarIndicatorSize"]+c[a+"ScrollbarMaxScroll"]-8)),c[a+"ScrollbarWrapper"].style.webkitTransitionDelay="0",c[a+"ScrollbarWrapper"].style.opacity=b&&c.options.hideScrollbar?"0":"1",c[a+"ScrollbarIndicator"].style.webkitTransform=k+(a=="h"?d+"px,0":"0,"+d+"px")+l)},_transitionTime:function(a){var b=this;a+="ms",b.scroller.style.webkitTransitionDuration=a,b.hScrollbar&&(b.hScrollbarIndicator.style.webkitTransitionDuration=a),b.vScrollbar&&(b.vScrollbarIndicator.style.webkitTransitionDuration=a)},_start:function(a){var b=this,d=c?a.changedTouches[0]:a,e;b.moved=!1,a.preventDefault(),b.moved=!1,b.distX=0,b.distY=0,b.absDistX=0,b.absDistY=0,b.dirX=0,b.dirY=0,b.returnTime=0,b._transitionTime(0);if(b.options.momentum){e=new WebKitCSSMatrix(window.getComputedStyle(b.scroller,null).webkitTransform);if(e.m41!=b.x||e.m42!=b.y)b._unbind("webkitTransitionEnd"),b._pos(e.m41,e.m42)}b.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)",b.hScrollbar&&(b.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)"),b.vScrollbar&&(b.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)"),b.startX=b.x,b.startY=b.y,b.pointX=d.pageX,b.pointY=d.pageY,b.startTime=a.timeStamp,b.options.onScrollStart&&b.options.onScrollStart.call(b),b._bind(h),b._bind(i),b._bind(j)},_move:function(a){if(!(c&&a.touches.length>1)){var b=this,d=c?a.changedTouches[0]:a,e=d.pageX-b.pointX,f=d.pageY-b.pointY,g=b.x+e,h=b.y+f;a.preventDefault(),b.pointX=d.pageX,b.pointY=d.pageY;if(g>0||g<b.maxScrollX)g=b.options.bounce?b.x+e/2.4:g>=0||b.maxScrollX>=0?0:b.maxScrollX;if(h>0||h<b.maxScrollY)h=b.options.bounce?b.y+f/2.4:h>=0||b.maxScrollY>=0?0:b.maxScrollY;if(b.absDistX<4&&b.absDistY<4){b.distX+=e,b.distY+=f,b.absDistX=m.abs(b.distX),b.absDistY=m.abs(b.distY);return}b.options.lockDirection&&(b.absDistX>b.absDistY+3?(h=b.y,f=0):b.absDistY>b.absDistX+3&&(g=b.x,e=0)),b.moved=!0,b._pos(g,h),b.dirX=e>0?-1:e<0?1:0,b.dirY=f>0?-1:f<0?1:0,a.timeStamp-b.startTime>300&&(b.startTime=a.timeStamp,b.startX=b.x,b.startY=b.y)}},_end:function(a){if(!c||a.touches.length==0){var b=this,d=c?a.changedTouches[0]:a,e,f,g={dist:0,time:0},k={dist:0,time:0},l=a.timeStamp-b.startTime,n=b.x,o=b.y,p;b._unbind(h),b._unbind(i),b._unbind(j);if(!b.moved){if(c){b.doubleTapTimer=null,e=d.target;while(e.nodeType!=1)e=e.parentNode;f=document.createEvent("MouseEvents"),f.initMouseEvent("click",!0,!0,a.view,1,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),f._fake=!0,e.dispatchEvent(f)}b._resetPos();return}if(l<300&&b.options.momentum){g=n?b._momentum(n-b.startX,l,-b.x,b.scrollerW-b.wrapperW+b.x,b.options.bounce?b.wrapperW:0):g,k=o?b._momentum(o-b.startY,l,-b.y,b.maxScrollY<0?b.scrollerH-b.wrapperH+b.y:0,b.options.bounce?b.wrapperH:0):k,n=b.x+g.dist,o=b.y+k.dist;if(b.x>0&&n>0||b.x<b.maxScrollX&&n<b.maxScrollX)g={dist:0,time:0};if(b.y>0&&o>0||b.y<b.maxScrollY&&o<b.maxScrollY)k={dist:0,time:0}}if(g.dist||k.dist){p=m.max(m.max(g.time,k.time),10),b.scrollTo(n,o,p);return}b._resetPos(200)}},_resetPos:function(a){var b=this,c=b.x,d=b.y;b.x>=0?c=0:b.x<b.maxScrollX&&(c=b.maxScrollX),b.y>=0||b.maxScrollY>0?d=0:b.y<b.maxScrollY&&(d=b.maxScrollY);c==b.x&&d==b.y?(b.moved&&(b.options.onScrollEnd&&b.options.onScrollEnd.call(b),b.moved=!1),b.hScrollbar&&b.options.hideScrollbar&&(b.hScrollbarWrapper.style.webkitTransitionDelay="300ms",b.hScrollbarWrapper.style.opacity="0"),b.vScrollbar&&b.options.hideScrollbar&&(b.vScrollbarWrapper.style.webkitTransitionDelay="300ms",b.vScrollbarWrapper.style.opacity="0")):(a&&(b.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)",b.hScrollbar&&(b.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)"),b.vScrollbar&&(b.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)")),b.scrollTo(c,d,a||0))},_transitionEnd:function(a){var b=this;a&&a.stopPropagation(),b._unbind("webkitTransitionEnd"),b._resetPos(b.returnTime),b.returnTime=0},_momentum:function(a,b,c,d,e){var f=this,g=6e-4,h=m.abs(a)/b,i=h*h/(2*g),j=0,k=0;a>0&&i>c?(k=e/(6/(i/h*g)),c=c+k,f.returnTime=800/e*k+100,h=h*c/i,i=c):a<0&&i>d&&(k=e/(6/(i/h*g)),d=d+k,f.returnTime=800/e*k+100,h=h*d/i,i=d),i=i*(a<0?-1:1),j=h/g;return{dist:i,time:m.round(j)}},_offset:function(a,b){var c=-a.offsetLeft,d=-a.offsetTop;if(!b)return{x:c,y:d};while(a=a.offsetParent)c-=a.offsetLeft,d-=a.offsetTop;return{x:c,y:d}},_bind:function(a,b){(b||this.scroller).addEventListener(a,this,!1)},_unbind:function(a,b){(b||this.scroller).removeEventListener(a,this,!1)},destroy:function(){var a=this;a.hScrollbar=!1,a.vScrollbar=!1,a._scrollbar("h"),a._scrollbar("v"),a.scroller.style.webkitTransform="",a._unbind("webkitTransitionEnd"),a._unbind(f),a._unbind(g),a._unbind(h),a._unbind(i),a._unbind(j)},refresh:function(){var a=this;a.wrapperW=a.wrapper.clientWidth,a.wrapperH=a.wrapper.clientHeight,a.scrollerW=a.scroller.offsetWidth,a.scrollerH=a.scroller.offsetHeight,a.maxScrollX=a.wrapperW-a.scrollerW,a.maxScrollY=a.wrapperH-a.scrollerH,a.dirX=0,a.dirY=0,a._transitionTime(0),a.hScroll=a.options.hScroll&&a.maxScrollX<0,a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH),a.hScrollbar=a.hScroll&&a.options.hScrollbar,a.vScrollbar=a.vScroll&&a.options.vScrollbar&&a.scrollerH>a.wrapperH,a._scrollbar("h"),a._scrollbar("v"),a._resetPos()},scrollTo:function(a,b,c,d){var e=this;d&&(a=e.x-a,b=e.y-b),c=!c||m.round(e.x)==m.round(a)&&m.round(e.y)==m.round(b)?0:c,e.moved=!0,c&&e._bind("webkitTransitionEnd"),e._transitionTime(c),e._pos(a,b),c||setTimeout(function(){e._transitionEnd()},0)},scrollToElement:function(a,b){var c=this,d;a=a.nodeType?a:c.scroller.querySelector(a);!a||(d=c._offset(a),d.x=d.x>0?0:d.x<c.maxScrollX?c.maxScrollX:d.x,d.y=d.y>0?0:d.y<c.maxScrollY?c.maxScrollY:d.y,b=b===undefined?m.max(m.abs(d.x)*2,m.abs(d.y)*2):b,c.scrollTo(d.x,d.y,b))}};var b="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,c="ontouchstart"in window,d=/iphone|ipad/gi.test(navigator.appVersion),e=/android/gi.test(navigator.appVersion),f="onorientationchange"in window?"orientationchange":"resize",g=c?"touchstart":"mousedown",h=c?"touchmove":"mousemove",i=c?"touchend":"mouseup",j=c?"touchcancel":"mouseup",k="translate"+(b?"3d(":"("),l=b?",0)":")",m=Math;typeof exports!="undefined"?exports.iScroll=a:window.iScroll=a})()